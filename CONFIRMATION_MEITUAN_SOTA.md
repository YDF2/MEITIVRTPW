# ç¡®è®¤ï¼šç¾å›¢SOTAç®—æ³•æ”¹è¿›å·²åº”ç”¨

## ä½ çš„è¿è¡Œå‘½ä»¤

```bash
python main.py --orders 200 --vehicles 40 --iterations 50 --solver alns-dc
```

## âœ… ç¡®è®¤ï¼šä½¿ç”¨äº†æ‰€æœ‰æ”¹è¿›çš„ç®—æ³•

### 1. æ±‚è§£å™¨æµç¨‹

å½“ä½ ä½¿ç”¨ `--solver alns-dc` æ—¶ï¼Œä»£ç æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š

```
main.py
  â””â”€> create_solver(solver_type='alns-dc')
       â””â”€> ALNSDivideAndConquerSolver()
            â””â”€> DivideAndConquerSolver()
                 â”œâ”€> å­é—®é¢˜: ALNS() [ä½¿ç”¨æ”¹è¿›çš„ALNS]  â† åŒ…å«æ‰€æœ‰æ”¹è¿› âœ“
                 â””â”€> å…¨å±€ä¼˜åŒ–: ALNS() [ä½¿ç”¨æ”¹è¿›çš„ALNS] â† åŒ…å«æ‰€æœ‰æ”¹è¿› âœ“
```

### 2. æ”¹è¿›éªŒè¯

åœ¨ `algorithm/divide_and_conquer.py` ä¸­ï¼Œæ‰€æœ‰çš„ ALNS å®ä¾‹åŒ–éƒ½æ˜¯ï¼š

```python
# ç¬¬240è¡Œ - å­é—®é¢˜æ±‚è§£
alns = ALNS(
    max_iterations=self.sub_iterations,
    random_seed=random.randint(0, 10000),
    verbose=False
)

# ç¬¬621è¡Œ - å­é—®é¢˜æ±‚è§£ï¼ˆå¹¶è¡Œç‰ˆæœ¬ï¼‰
alns = ALNS(
    max_iterations=self.sub_iterations,
    random_seed=random.randint(0, 10000),
    verbose=False
)

# ç¬¬791è¡Œ - å…¨å±€ä¼˜åŒ–
alns = ALNS(
    max_iterations=self.global_iterations,
    random_seed=self.random_seed,
    verbose=self.verbose
)
```

è¿™äº›éƒ½æ˜¯ä½¿ç”¨ `from algorithm.alns import ALNS` å¯¼å…¥çš„æ”¹è¿›ç‰ˆæœ¬ã€‚

### 3. æ‰€æœ‰æ”¹è¿›ç‰¹æ€§æ¸…å•

å½“ä½ è¿è¡Œä¸Šè¿°å‘½ä»¤æ—¶ï¼Œä»¥ä¸‹æ‰€æœ‰æ”¹è¿›éƒ½ä¼šè‡ªåŠ¨å¯ç”¨ï¼š

#### âœ… 1. UCB ç®—å­é€‰æ‹©ç­–ç•¥
- **ä½ç½®**: `algorithm/operators.py` - `DestroyOperators` å’Œ `RepairOperators`
- **çŠ¶æ€**: `use_ucb=True` (é»˜è®¤å¯ç”¨)
- **å‚æ•°**: `ucb_c=2.0` (æ¢ç´¢ç³»æ•°)
- **å…¬å¼**: $\text{Score}_i = \bar{X}_i + C \cdot \sqrt{\frac{2 \ln N}{n_i}}$
- **æ•ˆæœ**: æ™ºèƒ½å¹³è¡¡æ¢ç´¢ä¸åˆ©ç”¨ï¼Œä¼˜äºä¼ ç»Ÿè½®ç›˜èµŒ

#### âœ… 2. ç©ºé—´é‚»è¿‘ç§»é™¤ç®—å­ (h2)
- **ä½ç½®**: `algorithm/operators.py` - `spatial_proximity_removal()`
- **ç­–ç•¥**: ç§»é™¤åœ°ç†ä½ç½®æ¥è¿‘çš„è®¢å•ç»„
- **å‚æ•°**: åŠå¾„ = `GRID_SIZE Ã— Uniform(0.15, 0.35)`
- **æ•ˆæœ**: è·³å‡ºå±€éƒ¨æœ€ä¼˜ï¼Œé‡æ–°ä¼˜åŒ–åŒºåŸŸè®¢å•

#### âœ… 3. æˆªæ­¢æ—¶é—´ç§»é™¤ç®—å­ (h7)
- **ä½ç½®**: `algorithm/operators.py` - `deadline_based_removal()`
- **ç­–ç•¥**: ç§»é™¤æœ€ç´§è¿«/æœ€æ™š/æœ€çª„æ—¶é—´çª—çš„è®¢å•
- **æ•ˆæœ**: å¤„ç†æ—¶é—´çª—ç´§è¿«çš„"é’‰å­æˆ·"è®¢å•

#### âœ… 4. é£é™©å†³ç­–è¯„åˆ†æœºåˆ¶
- **ä½ç½®**: `algorithm/objective.py` - `calculate_insertion_cost()`
- **å…¬å¼**: $\text{Score} = \alpha \cdot \text{Cost} + \beta \cdot \text{Risk}$
- **å‚æ•°**: `use_matching_score=True`, `alpha=0.7`, `beta=0.3`
- **é£é™©è®¡ç®—**: åŸºäºæ—¶é—´ç¼“å†²ï¼ˆSlack Timeï¼‰
- **æ•ˆæœ**: é¿å…æ’å…¥é«˜é£é™©ä½ç½®

#### âœ… 5. å…±äº«å–è´§ç‚¹å»ºæ¨¡
- **ä½ç½®**: `utils/generator.py` - `generate_orders_with_shared_pickups()`
- **çº¦æŸ**: å–è´§ç‚¹æ•°é‡ â‰¤ è®¢å•æ•° / 3
- **é»˜è®¤**: `shared_pickups=True`
- **æ•ˆæœ**: ç¬¦åˆå®é™…ä¸šåŠ¡åœºæ™¯

### 4. æ”¹è¿›çš„å¯è§†åŒ–å±•ç¤º

è¿è¡Œä½ çš„å‘½ä»¤åï¼Œä¼šç”Ÿæˆä»¥ä¸‹å›¾è¡¨ï¼š

1. **route_visualization.png** - è·¯å¾„å›¾
2. **convergence.png** - æ”¶æ•›æ›²çº¿
3. **operator_weights.png** - ç®—å­æƒé‡åˆ†å¸ƒï¼ˆæ ‡æ³¨æ–°ç®—å­ï¼‰
4. **meituan_sota_statistics.png** â­ **æ–°å¢**
   - UCBå‚æ•°å±•ç¤º
   - ç®—å­ä½¿ç”¨æ¬¡æ•°ç»Ÿè®¡
   - ç®—å­å¹³å‡å¥–åŠ±ï¼ˆUCBå…³é”®æŒ‡æ ‡ï¼‰
   - æ ‡æ³¨ç¾å›¢SOTAæ–°å¢ç®—å­ï¼ˆh2, h7ï¼‰

### 5. å‘½ä»¤è¡Œè¾“å‡ºè¯´æ˜

è¿è¡Œæ—¶ä½ ä¼šçœ‹åˆ°ï¼š

```
[æ­¥éª¤7] ç”Ÿæˆå¯è§†åŒ–å›¾...
  âœ“ æ£€æµ‹åˆ°ALNS-DCç»Ÿè®¡ä¿¡æ¯: XX æ¬¡è¿­ä»£
  âœ“ ç”Ÿæˆç¾å›¢SOTAç®—æ³•è¯¦ç»†ç»Ÿè®¡å›¾...

  ã€ç¾å›¢SOTAç®—æ³•ç»Ÿè®¡ã€‘
  ============================================================
  UCBç®—å­é€‰æ‹©: å¯ç”¨
  UCBæ¢ç´¢ç³»æ•°C: 2.0
  æ€»è¿­ä»£æ¬¡æ•°: XXX

  ç ´åç®—å­è¯¦æƒ…:
    ğŸ†• spatial_proximity_removal      : ä½¿ç”¨  XXæ¬¡, å¹³å‡å¥–åŠ±=X.XXX
    ğŸ†• deadline_based_removal         : ä½¿ç”¨  XXæ¬¡, å¹³å‡å¥–åŠ±=X.XXX
       random_removal                 : ä½¿ç”¨  XXæ¬¡, å¹³å‡å¥–åŠ±=X.XXX
       worst_removal                  : ä½¿ç”¨  XXæ¬¡, å¹³å‡å¥–åŠ±=X.XXX
       shaw_removal                   : ä½¿ç”¨  XXæ¬¡, å¹³å‡å¥–åŠ±=X.XXX
       route_removal                  : ä½¿ç”¨  XXæ¬¡, å¹³å‡å¥–åŠ±=X.XXX

  ä¿®å¤ç®—å­è¯¦æƒ…:
       greedy_insertion               : ä½¿ç”¨  XXæ¬¡, å¹³å‡å¥–åŠ±=X.XXX
       regret_2_insertion             : ä½¿ç”¨  XXæ¬¡, å¹³å‡å¥–åŠ±=X.XXX
       regret_3_insertion             : ä½¿ç”¨  XXæ¬¡, å¹³å‡å¥–åŠ±=X.XXX
       random_insertion               : ä½¿ç”¨  XXæ¬¡, å¹³å‡å¥–åŠ±=X.XXX
  ============================================================
```

### 6. ä¸åŸå§‹ALNSçš„å¯¹æ¯”

| ç‰¹æ€§ | åŸå§‹ALNS | ç¾å›¢SOTAæ”¹è¿› |
|------|---------|-------------|
| ç®—å­é€‰æ‹© | è½®ç›˜èµŒ | âœ… UCB (Multi-Armed Bandit) |
| ç ´åç®—å­æ•°é‡ | 4ä¸ª | âœ… 6ä¸ª (æ–°å¢h2, h7) |
| æ’å…¥è¯„åˆ† | ä»…æˆæœ¬ | âœ… æˆæœ¬+é£é™© |
| å–è´§ç‚¹å»ºæ¨¡ | ç‹¬ç«‹ | âœ… å…±äº« (â‰¤è®¢å•æ•°/3) |
| ç†è®ºåŸºç¡€ | ç»å…¸ALNS | âœ… ç¾å›¢INFORMSè®ºæ–‡ |

---

## æ€»ç»“

âœ… **ç¡®è®¤**ï¼šä½ è¿è¡Œ `python main.py --orders 200 --vehicles 40 --iterations 50 --solver alns-dc` æ—¶ï¼š

1. ä½¿ç”¨äº† **æ”¹è¿›çš„ ALNS ç±»**ï¼ˆåŒ…å«æ‰€æœ‰ç¾å›¢SOTAæ”¹è¿›ï¼‰
2. åœ¨ **å­é—®é¢˜æ±‚è§£** å’Œ **å…¨å±€ä¼˜åŒ–** ä¸­éƒ½åº”ç”¨äº†æ”¹è¿›
3. å¯è§†åŒ–ä¼šå±•ç¤º **UCBç»Ÿè®¡**ã€**æ–°ç®—å­æ ‡æ³¨** å’Œ **è¯¦ç»†å¥–åŠ±ä¿¡æ¯**
4. æ‰€æœ‰ 5 é¡¹æ”¹è¿›ç‰¹æ€§éƒ½ **é»˜è®¤å¯ç”¨**

ğŸ¯ ä½ å¾—åˆ°çš„æ˜¯å®Œæ•´çš„ç¾å›¢SOTAç®—æ³•ä¼˜åŒ–æ•ˆæœï¼
